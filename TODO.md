# Todo

## Done
- [DROP] Use OCC-fix for modified beads!!: Caused crashes
- [DROP] Try volume generating: Unnecessary
- [DONE] Number of bridges, minimum bead size
- [DONE] Scale polydisperse bead meshes to smaller beads. -> set lc for individual beads.
- [DONE] bounding box for beads
- [DONE] Generate polydisperse beads with bridges.
- [DONE] Implement Translation
- [DONE] Check timings for fields vs boundary mesh sizes
- [DONE] Implement PreTranslation
- [DONE] Better preScalingFactor implementation
- [DONE] Implement auto cylinder boundaries
- [DONE] Cleaner outputs/logging.
- [DONE] Improve default.in: folds should allow quick selection of kugelpackung
- [DONE] Export geometry before mesh start: [ Possible ].
- [DONE] Time spent on booleans
- [DONE] Switch for fields vs brep meshing
- [DONE] Fix poly capping on larger beads: use cones and frustums
- [DONE] output git commit + state into stdout
- [DONE] Switch off outputs of mesh fragments 
- [DONE] Better makefile
- [DONE] Check if it's possible to import meshes and modify them.
- [DONE] Figure out how to calculate mesh volume for different components
- [DONE] git state isn't perfect since it is dirty if default.in is changed before compile
- [DONE] Allow cylinder constrained creation again(zbot, ztop)
- [DONE] RCYL is calclated after bead radius modification: Change it to depend on initial packing
- [DONE] Implement enlarged beads
- [DONE] Save options (so that it can be reloaded and used with exported geometry?): Using logs now.
- [DONE] write meshes to individual folders. Including logs.
- [DONE] set rCylDelta after transform-scaling
- [DONE] FIX: minimum bead radius is zero
- [DONE] Implement Higher order mesh generation
- [DONE] Try embedded bead CP and mesh size control: not supported for HXT yet
- [DONE] Extract mesh volume data into variables to output the mesh-scaled volume in stdout.
- [DONE] Allow changing bead mesh scaling reference value: max/avg or number
- [DONE] Allow changing fragment output formats
- [DONE] Makefile depends on relative folder structure, fix it.
- [DONE] print exact version of gmsh used
- [DONE] Checkpoint saves for 1D & 2D Meshes

[PROJ: Periodic]
    - [DONE] Create flag
    - [DONE] copy geometry 4x
    - [DONE] Cut with plane: Intersection
    - [DONE] Fix the transform problem: 
        - [DONE] Allow manual/auto transform parameters
        - [DONE] Allow manual/auto container geometry
    - [DONE] Implement GMSH setperiodic
    - [DONE] Generate periodic mesh
    - [NOTE] stacking for periodic meshes will work only for truly periodic geometries, where the beads peek out of the container limits (and essentially cross over) as generated with the packing-generator software
    - [NOTE] Essentially, stacking offset = xmax - xmin etc. Decoupling them will allow generating periodic meshes for test cases like one bead cases that repeat.
    - [DONE] Create a periodicOffset keyword with options = {auto | xOff yOff}. Auto => xMax- xMin. 
    - [NOTE] periodic meshing fails for cases where there are no beads intersecting the cut planes (simple test cases)
    - [DONE] Implement Periodic-Z and toggle ability
    - [DROP] Fix periodics without cut beads 

## Open
- [DONE] Implement porosity control: manipulate porosity by adding/removing beads
    - [DONE] Removing beads
    - [TASK] Adding beads
    - [DONE] Improved algorithm: Deletion zones (% based? diameter based?)
- [TASK] Bridges at the cylinder-bead interface
- [TASK] Check for memleaks. No errors. But some blocks are reachable (beads vector not deleted).
- [TASK] Write test inputs to run and verify code.
- [TASK] Scrap the need for ./create.sh. create <file>.log automatically
- [TASK] Enlarged beads don't work at 0.001: Fix the rcyl assertion.
- [TASK] meshSizeMethod=0 doesn't work
- [TASK] Mesh Sensitivity
    - [TASK] Mesh.RandomFactor(3D)
    - [TASK] Mesh.ToleranceInitialDelaunay
- [TASK] clean duplicate local variables in packedbed.transform()
- [TASK] boost endian conversion is not available easily on JURECA: remove dependency
- [TASK] OCC parallel boolean uses up all cores
- [TASK] Plugin(AnalyseCurvedMesh)
- [TASK] Plugin(DiscretizationError) 
- [TASK] Implement debug/release version handling?
- [TASK] it might be neater to scale bed, updatebounds, then translate bed
- [TASK] Make changes necessary for XNS Generic Implementation of Chromatography
- [TASK] Consider creating a mesh.info output with all the mesh data (lengths, volumes, quality etc) in json format
- [DONE] Use rCyl, xyz Cyl if provided: Moved cylinder representation
- [TASK] Check that the output format is viable before starting the mesh
- [TASK] Improved centering algorithm for packed bed translation to origin
- [TASK] makefile git-check/version impedes parallel build.
- [TASK] Write better documentation: Manual etc. 
- [TASK] Clean GeomInFile uses
- [TASK] Check if rectangular mesh sims run or not
- [TASK] Intuitive control & code for mesh sizing
- [DONE] Generate periodic meshes
- [TASK] More intuitive input parameters for dimensions etc. 
    - [TASK] zBot/zTop
    - [TASK] inlet/outlet
    - [DONE] nBeads
    - [TASK] Porosity Control
- [TASK] Fix GeomInFile and GeomOutFile in log output when using as input
- [DONE] Better architecture
- [DONE] let genmesh run in a directory with input file and generate necessary files in the same directory. No output subdir nonsense.
- [TASK] Change rCyl, rCylDelta etc to rCol, rColDelta
- [DONE] Implementing z-direction periodicity requires stacking in z-dir as well
- [DONE] remove "floating" points from surface fragmented outputs etc for periodic cases: Somehow went away
- [TASK] Be consistent in the "box" and "cyl" keyword arguments in the input file
- [TASK] Expose a better keyword for multithreading 
- [TASK] Expose a better keyword for mesh dimensions ?
- [TASK] Improve GMSH default settings
- [TASK] Keyword cases need standardization: camelCase or snake_case or dot.case?
- [TASK] Plugin to check element qualities
- [TASK] Write out bead packing info and other info to files that might be more easily readable by scripts? Issue is duplication of info at different sections of the log file. Try something like mesh.nfo?

- [DONE] Check for memory leaks again: Most are from GMSH/OCCT
- [TASK] Fix geometry input and output
- [TASK] Fix main and fragment output formats
- [TASK] remove z cut bead surfaces from bead surfaces.
- [TASK] Add more timing info. Print more at the end, after writes.
- [TASK] consider typedeffing/classing std::vector<std::pair<int,int>>
- [TASK] Write a bead intersection check in packed bed to ensure that stacking is valid.

[PROJ: TESTS]
    - [TASK] Check periodic surface matches
    - [TASK] Check geometry input and output
    - [TASK] Mesh size methods
    - [TASK] Visual output with paraview?
    - [TASK] add more tests with packing-generation based packing

